{% extends "core/base.html" %}
{% load i18n %}

{% block title %}{% trans "Full Text Search" %}{% endblock %}

{% block content %}

{{request.path}}

<h1>{% trans "Full Text Search" %}</h1>
<p style="margin-top: -10px;">{% trans "Please enter a search key to start the search." %}</p>
<div class="courseBox">

<form method="get" action=".">
  <table>
  <tr>
  <th style="width:120px;text-align:left;">{% trans "Search key" %}:</th>
  <td class="search">{{form.q}}</td>
  <td><input class="find" type="submit" value=""></td>
  </tr>
  </table>
</form>
</div>




{% if query %}
<div class="category">{% trans "Search Results" %}</div>
<div style="margin-top:10px;" class="documentBox">
<ul>
{% for result in page.object_list %}
{% if result.object.pk %}
<li style="background-image:url({{ MEDIA_URL}}img/fileicons/{{result.object.getLatestRevision.type|default:"file"}}.png)" class="file {{result.object.getLatestRevision.type}}"><a href="{% url document result.object.pk %}">{{result.object.name}}</a> <span style="color:rgb(200,200,200)">({{result.object.course.getSemester}})</span>
</li>
<li class="fileInfo">{% trans "Uploaded by" %} {{result.object.author.get_profile.profile|safe}} - {% blocktrans with since=result.object.getLatestRevision.pub_date|timesince %}updated {{since}} ago{% endblocktrans %}</li>
{% endif %}
{% empty %}
	<li class="info">{% trans "Unfortunateley your search did not return any results." %}</li>
{% endfor %}
{% endif %}
</ul>
</div>
{% if page.has_previous or page.has_next %}

<div class="pagination">
	<span class="step-left">
  	{% if page.has_previous %}
    	<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">&laquo;</a>
		{% endif %}

    <span class="current">
			{% trans "Page" %} {{ page.number }} {% trans "of" %} {{ page.paginator.num_pages }}
		</span>

    <span class="step-right">
			{% if page.has_next %}
      	<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">&raquo;</a>
      {% endif %}
    </span>
</div>
{% endif %}

{% endblock %}
